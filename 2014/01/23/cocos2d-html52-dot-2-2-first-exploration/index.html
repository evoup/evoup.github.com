<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>cocos2d-html5-2.2.2初探 | evoup`s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="准备用最新的cocos2d-html5 2.2.2的框架作为游戏开发引擎，整个引擎还是逻辑相当清晰好理解。 本文部分参考v2.1.1这篇分析文章http://blog.csdn.net/honghaier/article/details/8642553 翻了几篇官网几篇文章，发现对应的教程没有同步起来，比如说这篇：http://www.gamefromscratch.com/post/2012/0">
<meta property="og:type" content="article">
<meta property="og:title" content="cocos2d-html5-2.2.2初探">
<meta property="og:url" content="http://blog.evoupsight.com/2014/01/23/cocos2d-html52-dot-2-2-first-exploration/index.html">
<meta property="og:site_name" content="evoup`s Blog">
<meta property="og:description" content="准备用最新的cocos2d-html5 2.2.2的框架作为游戏开发引擎，整个引擎还是逻辑相当清晰好理解。 本文部分参考v2.1.1这篇分析文章http://blog.csdn.net/honghaier/article/details/8642553 翻了几篇官网几篇文章，发现对应的教程没有同步起来，比如说这篇：http://www.gamefromscratch.com/post/2012/0">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html5_2.2.2_code_layout.png">
<meta property="og:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html52.2.2helloworld.png">
<meta property="og:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html5-res/HelloWorld.png">
<meta property="og:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html5-res/CloseNormal.png">
<meta property="og:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html5-res/CloseSelected.png">
<meta property="og:updated_time" content="2019-03-17T09:07:08.944Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cocos2d-html5-2.2.2初探">
<meta name="twitter:description" content="准备用最新的cocos2d-html5 2.2.2的框架作为游戏开发引擎，整个引擎还是逻辑相当清晰好理解。 本文部分参考v2.1.1这篇分析文章http://blog.csdn.net/honghaier/article/details/8642553 翻了几篇官网几篇文章，发现对应的教程没有同步起来，比如说这篇：http://www.gamefromscratch.com/post/2012/0">
<meta name="twitter:image" content="http://blog.evoupsight.com/images/evoup/cocos2d-html5_2.2.2_code_layout.png">
  
    <link rel="alternate" href="/atom.xml" title="evoup`s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">evoup`s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.evoupsight.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-cocos2d-html52-dot-2-2-first-exploration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/23/cocos2d-html52-dot-2-2-first-exploration/" class="article-date">
  <time datetime="2014-01-23T13:14:00.000Z" itemprop="datePublished">2014-01-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cocos2d-html5/">cocos2d-html5</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      cocos2d-html5-2.2.2初探
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>准备用最新的cocos2d-html5 2.2.2的框架作为游戏开发引擎，整个引擎还是逻辑相当清晰好理解。</p>
<p>本文部分参考v2.1.1这篇分析文章<br><a href="http://blog.csdn.net/honghaier/article/details/8642553" target="_blank" rel="noopener">http://blog.csdn.net/honghaier/article/details/8642553</a></p>
<p>翻了几篇官网几篇文章，发现对应的教程没有同步起来，比如说这篇：<br><a href="http://www.gamefromscratch.com/post/2012/06/08/Cocos2D-HTML-Tutorial-3All-about-sprites-and-positioning.aspx" target="_blank" rel="noopener">http://www.gamefromscratch.com/post/2012/06/08/Cocos2D-HTML-Tutorial-3All-about-sprites-and-positioning.aspx</a></p>
<a id="more"></a>
<p>其间有这么一段代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.src = c.engineDir + <span class="string">'platform/jsloader.js'</span>;</span><br></pre></td></tr></table></figure>
<p>可以看到在cocos2d目录下没有这个文件，OMG! 淡定缓一缓神，让我们耐心点，这里教你一步一步来掌了解2.2.2版本的api来给原来的教程动手术,我们首先来讲解HelloWorld：</p>
<p>首先看2.2.2的helloworld的代码分布情况：</p>
<p><img src="/images/evoup/cocos2d-html5_2.2.2_code_layout.png" alt="Alt text"></p>
<p>其中项目必须的文件有cocos2d（cocos2d引擎）、extensions（GUI的扩展）、external（外部引擎如box2d）、lib（cocos2d基本库）。</p>
<p>接下来在根目录下仿照HelloHTML5World中的布局开始做一个项目，创建一个叫做helloworld的文件夹。</p>
<p>看一下运行截图<br><img src="/images/evoup/cocos2d-html52.2.2helloworld.png" alt="Alt text"></p>
<hr>
<p>首先是在该文件夹下创建第一个文件index.html<br><figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>hello cocos2d-html5<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">type</span>=<span class="string">"iamge/GIF"</span> <span class="attr">href</span>=<span class="string">"res/favicon.ico"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"user-scalable=no"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"full-screen"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"screen-orientation"</span> <span class="attr">content</span>=<span class="string">"portrait"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"x5-fullscreen"</span> <span class="attr">content</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"360-fullscreen"</span> <span class="attr">content</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body, canvas, div &#123;</span></span><br><span class="line"><span class="undefined">            -moz-user-select: none;</span></span><br><span class="line"><span class="undefined">            -webkit-user-select: none;</span></span><br><span class="line"><span class="undefined">            -ms-user-select: none;</span></span><br><span class="line"><span class="undefined">            -khtml-user-select: none;</span></span><br><span class="line"><span class="undefined">            -webkit-tap-highlight-color: rgba(0,0,0,0);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"padding:0; margin: 0; background: #000;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"gameCanvas"</span> <span class="attr">width</span>=<span class="string">"800"</span> <span class="attr">height</span>=<span class="string">"450"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"cocos2d.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>####解释:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"user-scalable=no"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>viewport这个是移动端的meta设置，content设置为user-scalable=no代表在移动设备上 不可缩放。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>apple-mobile-web-app-capable这个是移动端的参数，全屏模式下content设置为yes，否则不用设置。可以通过window.navigator.standalone属性来得知是否网页是否处于全屏模式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"full-screen"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个是给某些浏览器的全屏设置，比如说ucweb</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"screen-orientation"</span> <span class="attr">content</span>=<span class="string">"portrait"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>screen-orientation这个meta参数代表移动端的屏幕朝向，有2个portrait和landscape，分别代表竖向和横向,这portrait是竖向了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"x5-fullscreen"</span> <span class="attr">content</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>这个是腾讯qq浏览器的全屏</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"360-fullscreen"</span> <span class="attr">content</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>360浏览器的全屏</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    body, canvas, div &#123;</span></span><br><span class="line"><span class="undefined">        -moz-user-select: none;</span></span><br><span class="line"><span class="undefined">        -webkit-user-select: none;</span></span><br><span class="line"><span class="undefined">        -ms-user-select: none;</span></span><br><span class="line"><span class="undefined">        -khtml-user-select: none;</span></span><br><span class="line"><span class="undefined">        -webkit-tap-highlight-color: rgba(0,0,0,0);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中-moz-user-select、-webkit-user-select、-ms-user-select和-khtml-user-select都取值none，代表文字都不选中。而-webkit-tap-highlight-color: rgba(0,0,0,0);其中rgba的最后一个参数0代表点击一个链接或者通过JavaScript定义可点击元素的时候禁止出现灰色背景。<br>最后从同域引入cocos2d.js。</p>
<hr>
<p>接着创建第二个文件cocos2d.js<br><figure class="highlight js"><figcaption><span>cocos2d.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">var</span> c = &#123;</span><br><span class="line">        COCOS2D_DEBUG:<span class="number">2</span>, <span class="comment">//0 to turn debug off, 1 for basic debug, and 2 for full debug</span></span><br><span class="line">        box2d:<span class="literal">false</span>,</span><br><span class="line">        chipmunk:<span class="literal">false</span>,</span><br><span class="line">        showFPS:<span class="literal">true</span>,</span><br><span class="line">        frameRate:<span class="number">60</span>,</span><br><span class="line">        loadExtension:<span class="literal">false</span>,</span><br><span class="line">        renderMode:<span class="number">0</span>,       <span class="comment">//Choose of RenderMode: 0(default), 1(Canvas only), 2(WebGL only)</span></span><br><span class="line">        tag:<span class="string">'gameCanvas'</span>, <span class="comment">//the dom element to run cocos2d on</span></span><br><span class="line">        engineDir:<span class="string">'../cocos2d/'</span>,</span><br><span class="line">        <span class="comment">//SingleEngineFile:'',</span></span><br><span class="line">        appFiles:[</span><br><span class="line">            <span class="string">'src/resource.js'</span>,</span><br><span class="line">            <span class="string">'src/myApp.js'</span><span class="comment">//add your own files in order here</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!d.createElement(<span class="string">'canvas'</span>).getContext)&#123;</span><br><span class="line">        <span class="keyword">var</span> s = d.createElement(<span class="string">'div'</span>);</span><br><span class="line">        s.innerHTML = <span class="string">'&lt;h2&gt;Your browser does not support HTML5 canvas!&lt;/h2&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;p&gt;Google Chrome is a browser that combines a minimal design with sophisticated technology to make the web faster, safer, and easier.Click the logo to download.&lt;/p&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;a href="http://www.google.com/chrome" target="_blank"&gt;&lt;img src="http://www.google.com/intl/zh-CN/chrome/assets/common/images/chrome_logo_2x.png" border="0"/&gt;&lt;/a&gt;'</span>;</span><br><span class="line">        <span class="keyword">var</span> p = d.getElementById(c.tag).parentNode;</span><br><span class="line">        p.style.background = <span class="string">'none'</span>;</span><br><span class="line">        p.style.border = <span class="string">'none'</span>;</span><br><span class="line">        p.insertBefore(s,d.getElementById(c.tag));</span><br><span class="line"></span><br><span class="line">        d.body.style.background = <span class="string">'#ffffff'</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.removeEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="built_in">arguments</span>.callee, <span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//first load engine file if specified</span></span><br><span class="line">        <span class="keyword">var</span> s = d.createElement(<span class="string">'script'</span>);</span><br><span class="line">        <span class="comment">/*********Delete this section if you have packed all files into one*******/</span></span><br><span class="line">        <span class="keyword">if</span> (c.SingleEngineFile &amp;&amp; !c.engineDir) &#123;</span><br><span class="line">            s.src = c.SingleEngineFile;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c.engineDir &amp;&amp; !c.SingleEngineFile) &#123;</span><br><span class="line">            s.src = c.engineDir + <span class="string">'jsloader.js'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            alert(<span class="string">'You must specify either the single engine file OR the engine directory in "cocos2d.js"'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*********Delete this section if you have packed all files into one*******/</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//s.src = 'Packed_Release_File.js'; //IMPORTANT: Un-comment this line if you have packed all files into one</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.ccConfig = c;</span><br><span class="line">        s.id = <span class="string">'cocos2d-html5'</span>;</span><br><span class="line">        d.body.appendChild(s);</span><br><span class="line">        <span class="comment">//else if single file specified, load singlefile</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>####解释:<br>这整个就是一个匿名函数,然后调用的写法。</p>
<p>首先创建一个局部变量d，赋值为document</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="built_in">document</span>;</span><br></pre></td></tr></table></figure>
<p>然后创建一个c对象，提供全部配置信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = &#123;</span><br><span class="line">    COCOS2D_DEBUG:<span class="number">2</span>, <span class="comment">//0 to turn debug off, 1 for basic debug, and 2 for full debug</span></span><br><span class="line">    box2d:<span class="literal">false</span>,</span><br><span class="line">    chipmunk:<span class="literal">false</span>,</span><br><span class="line">    showFPS:<span class="literal">true</span>,</span><br><span class="line">    frameRate:<span class="number">60</span>,</span><br><span class="line">    loadExtension:<span class="literal">false</span>,</span><br><span class="line">    renderMode:<span class="number">0</span>,       <span class="comment">//Choose of RenderMode: 0(default), 1(Canvas only), 2(WebGL only)</span></span><br><span class="line">    tag:<span class="string">'gameCanvas'</span>, <span class="comment">//the dom element to run cocos2d on</span></span><br><span class="line">    engineDir:<span class="string">'../cocos2d/'</span>,</span><br><span class="line">    <span class="comment">//SingleEngineFile:'',</span></span><br><span class="line">    appFiles:[</span><br><span class="line">        <span class="string">'src/resource.js'</span>,</span><br><span class="line">        <span class="string">'src/myApp.js'</span><span class="comment">//add your own files in order here</span></span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>其中:<br>COCOS2D_DEBUG为调试等级（0关闭，1基本，2完全）；<br>box2d为是否采用box2d物理引擎，这里不使用设置为no；<br>chipmunk为一款物理引擎，同样不使用；<br>showFPS是否显示FPS，是；<br>loadExtension是否加载扩展，否；<br>renderMode渲染，0为默认，1为仅Canvas方式，2为仅WebGL方式;<br>tag为运行cocos2d的dom元素;<br>engineDir为cocos2d的引擎目录;<br>appFiles为一个列表，目前存2个文件的地址，src/resource.js和src/myApp.js;</p>
<p>下面这段为html5探测代码，如果探测失败，会出出现一个google的chrome浏览器的logo</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!d.createElement(<span class="string">'canvas'</span>).getContext)&#123;</span><br><span class="line">    <span class="keyword">var</span> s = d.createElement(<span class="string">'div'</span>);</span><br><span class="line">    s.innerHTML = <span class="string">'&lt;h2&gt;Your browser does not support HTML5 canvas!&lt;/h2&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;p&gt;Google Chrome is a browser that combines a minimal design with sophisticated technology to make the web faster, safer, and easier.Click the logo to download.&lt;/p&gt;'</span> +</span><br><span class="line">        <span class="string">'&lt;a href="http://www.google.com/chrome" target="_blank"&gt;&lt;img src="http://www.google.com/intl/zh-CN/chrome/assets/common/images/chrome_logo_2x.png" border="0"/&gt;&lt;/a&gt;'</span>;</span><br><span class="line">    <span class="keyword">var</span> p = d.getElementById(c.tag).parentNode;</span><br><span class="line">    p.style.background = <span class="string">'none'</span>;</span><br><span class="line">    p.style.border = <span class="string">'none'</span>;</span><br><span class="line">    p.insertBefore(s,d.getElementById(c.tag));</span><br><span class="line"></span><br><span class="line">    d.body.style.background = <span class="string">'#ffffff'</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再看下一段</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.removeEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="built_in">arguments</span>.callee, <span class="literal">false</span>);</span><br><span class="line">    <span class="comment">//first load engine file if specified</span></span><br><span class="line">    <span class="keyword">var</span> s = d.createElement(<span class="string">'script'</span>);</span><br><span class="line">    <span class="comment">/*********Delete this section if you have packed all files into one*******/</span></span><br><span class="line">    <span class="keyword">if</span> (c.SingleEngineFile &amp;&amp; !c.engineDir) &#123;</span><br><span class="line">    s.src = c.SingleEngineFile;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c.engineDir &amp;&amp; !c.SingleEngineFile) &#123;</span><br><span class="line">    s.src = c.engineDir + <span class="string">'jsloader.js'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">    alert(<span class="string">'You must specify either the single engine file OR the engine directory in "cocos2d.js"'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*********Delete this section if you have packed all files into one*******/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//s.src = 'Packed_Release_File.js'; //IMPORTANT: Un-comment this line if you have packed all files into one</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">document</span>.ccConfig = c;</span><br><span class="line">    s.id = <span class="string">'cocos2d-html5'</span>;</span><br><span class="line">    d.body.appendChild(s);</span><br><span class="line">    <span class="comment">//else if single file specified, load singlefile</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这段创建了DOMContentLoaded事件侦听器，干掉全部DOM对象。SingleEngineFile这个参数是如果要把cocos2d这个文件夹下的引擎程序打包成一个文件，则需要指定这个文件的路径。指定好了引擎路径engineDir为../cocos2d这个文件夹，然后加载jsloader.js(这个文件的作用是加载cocos2d需要用到的所有js文件，包括cocos2d.js,main.js,myApp.js),然后把配置文件存到document.ccConfig元素中去。<br>接着把cocos2d-html5这个id赋到创建到script标签上，然后加载到body标签中。</p>
<hr>
<p>接着创建第三个文件–主程序文件main.js,注意这还不是实现逻辑，而是cocos2d-html5初始化的套路。</p>
<figure class="highlight javascript"><figcaption><span>main.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cocos2dApp = cc.Application.extend(&#123;</span><br><span class="line">    config:<span class="built_in">document</span>[<span class="string">'ccConfig'</span>],</span><br><span class="line">    ctor:<span class="function"><span class="keyword">function</span> (<span class="params">scene</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line">        <span class="keyword">this</span>.startScene = scene;</span><br><span class="line">        cc.COCOS2D_DEBUG = <span class="keyword">this</span>.config[<span class="string">'COCOS2D_DEBUG'</span>];</span><br><span class="line">        cc.initDebugSetting();</span><br><span class="line">        cc.setup(<span class="keyword">this</span>.config[<span class="string">'tag'</span>]);</span><br><span class="line">        cc.AppController.shareAppController().didFinishLaunchingWithOptions();</span><br><span class="line">    &#125;,</span><br><span class="line">    applicationDidFinishLaunching:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cc.RenderDoesnotSupport())&#123;</span><br><span class="line">            <span class="comment">//show Information to user</span></span><br><span class="line">            alert(<span class="string">"Browser doesn't support WebGL"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// initialize director</span></span><br><span class="line">        <span class="keyword">var</span> director = cc.Director.getInstance();</span><br><span class="line"></span><br><span class="line">        cc.EGLView.getInstance().resizeWithBrowserSize(<span class="literal">true</span>);</span><br><span class="line">        cc.EGLView.getInstance().setDesignResolutionSize(<span class="number">800</span>, <span class="number">450</span>, cc.RESOLUTION_POLICY.SHOW_ALL);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// turn on display FPS</span></span><br><span class="line">        director.setDisplayStats(<span class="keyword">this</span>.config[<span class="string">'showFPS'</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// set FPS. the default value is 1.0/60 if you don't call this</span></span><br><span class="line">        director.setAnimationInterval(<span class="number">1.0</span> / <span class="keyword">this</span>.config[<span class="string">'frameRate'</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//load resources</span></span><br><span class="line">        cc.LoaderScene.preload(g_resources, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            director.replaceScene(<span class="keyword">new</span> <span class="keyword">this</span>.startScene());</span><br><span class="line">        &#125;, <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> cocos2dApp(HelloWorldScene);</span><br></pre></td></tr></table></figure>
<p>主要的功能都在cc.Application.extend中实现。首先config配置参数为document[‘ccConfig’]<br>然后看ctor：（顾名思义：config to run 配置转为启动）以scene为参数的匿名函数，先调用_super()方法这个引擎方法进行初始化，然后指定startScene开始场景为scene。调试等级cc.COCOS2D_DEBUG为cocos2d.js中指定的调试等级，cc.initDebugSetting为初始化调试设置，cc.setup(this.config[‘tag’])在名为tag的dom对象上创建cavas,cc.AppController.shareAppController().didFinishLaunchingWithOptions();这个是仿照cocos2d-iphone的函数命名的启动函数（顾名思义：就是启动结束会加载的函数）。</p>
<p>在正式进入写代码之前，稍等再看一下applicationDidFinishLaunching这个函数</p>
<p>先检查渲染是否支持，不支持就弹出“Browser doesn`t support WebGL”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(cc.RenderDoesnotSupport())&#123;</span><br><span class="line">    <span class="comment">//show Information to user</span></span><br><span class="line">    alert(<span class="string">"Browser doesn't support WebGL"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>初始化director</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// initialize director</span></span><br><span class="line"><span class="keyword">var</span> director = cc.Director.getInstance();</span><br></pre></td></tr></table></figure>
<p>重置浏览器大小</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cc.EGLView.getInstance().resizeWithBrowserSize(<span class="literal">true</span>);</span><br><span class="line">cc.EGLView.getInstance().setDesignResolutionSize(<span class="number">800</span>, <span class="number">450</span>, cc.RESOLUTION_POLICY.SHOW_ALL);</span><br></pre></td></tr></table></figure>
<p>打开显卡FPS</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// turn on display FPS</span></span><br><span class="line">director.setDisplayStats(<span class="keyword">this</span>.config[<span class="string">'showFPS'</span>]);</span><br></pre></td></tr></table></figure>
<p>默认设置fps为1秒60帧</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set FPS. the default value is 1.0/60 if you don't call this</span></span><br><span class="line">director.setAnimationInterval(<span class="number">1.0</span> / <span class="keyword">this</span>.config[<span class="string">'frameRate'</span>]);</span><br></pre></td></tr></table></figure>
<p>导演类的replaceScene方法来替换场景为startScene</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//load resources</span></span><br><span class="line">cc.LoaderScene.preload(g_resources, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    director.replaceScene(<span class="keyword">new</span> <span class="keyword">this</span>.startScene());</span><br><span class="line">&#125;, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p>最后实例化app</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> cocos2dApp(HelloWorldScene);</span><br></pre></td></tr></table></figure>
<hr>
<p>在正式步入工程文件之前，别急，创建一个src文件夹，然后在该文件夹下创建一个resource.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s_HelloWorld = <span class="string">"res/HelloWorld.png"</span>;</span><br><span class="line"><span class="keyword">var</span> s_CloseNormal = <span class="string">"res/CloseNormal.png"</span>;</span><br><span class="line"><span class="keyword">var</span> s_CloseSelected = <span class="string">"res/CloseSelected.png"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> g_resources = [</span><br><span class="line">    <span class="comment">//image</span></span><br><span class="line">    &#123;<span class="attr">src</span>:s_HelloWorld&#125;,</span><br><span class="line">    &#123;<span class="attr">src</span>:s_CloseNormal&#125;,</span><br><span class="line">    &#123;<span class="attr">src</span>:s_CloseSelected&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//plist</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//fnt</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//tmx</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//bgm</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//effect</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>然后在和src相同父目录下创建一个叫做res文件夹，把如下3个文件放入其中：</p>
<p>HelloWorld.png</p>
<p><img src="/images/evoup/cocos2d-html5-res/HelloWorld.png" alt="Alt text"></p>
<p>CloseNormal.png</p>
<p><img src="/images/evoup/cocos2d-html5-res/CloseNormal.png" alt="Alt text"></p>
<p>CloseSelected.png</p>
<p><img src="/images/evoup/cocos2d-html5-res/CloseSelected.png" alt="Alt text"></p>
<p>这就完成了资源文件的定义和提供。</p>
<hr>
<p>终于到工程主文件了，在src下创建一个叫做myApp.js的文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Helloworld = cc.Layer.extend(&#123;</span><br><span class="line">    isMouseDown:<span class="literal">false</span>,</span><br><span class="line">    helloImg:<span class="literal">null</span>,</span><br><span class="line">    helloLabel:<span class="literal">null</span>,</span><br><span class="line">    circle:<span class="literal">null</span>,</span><br><span class="line">    sprite:<span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">    init:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//////////////////////////////</span></span><br><span class="line">        <span class="comment">// 1. super init first</span></span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/////////////////////////////</span></span><br><span class="line">        <span class="comment">// 2. add a menu item with "X" image, which is clicked to quit the program</span></span><br><span class="line">        <span class="comment">//    you may modify it.</span></span><br><span class="line">        <span class="comment">// ask director the window size</span></span><br><span class="line">        <span class="keyword">var</span> size = cc.Director.getInstance().getWinSize();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add a "close" icon to exit the progress. it's an autorelease object</span></span><br><span class="line">        <span class="keyword">var</span> closeItem = cc.MenuItemImage.create(</span><br><span class="line">            <span class="string">"res/CloseNormal.png"</span>,</span><br><span class="line">            <span class="string">"res/CloseSelected.png"</span>,</span><br><span class="line">            <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                history.go(<span class="number">-1</span>);</span><br><span class="line">            &#125;,<span class="keyword">this</span>);</span><br><span class="line">        closeItem.setAnchorPoint(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> menu = cc.Menu.create(closeItem);</span><br><span class="line">        menu.setPosition(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">this</span>.addChild(menu, <span class="number">1</span>);</span><br><span class="line">        closeItem.setPosition(size.width - <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/////////////////////////////</span></span><br><span class="line">        <span class="comment">// 3. add your codes below...</span></span><br><span class="line">        <span class="comment">// add a label shows "Hello World"</span></span><br><span class="line">        <span class="comment">// create and initialize a label</span></span><br><span class="line">        <span class="keyword">this</span>.helloLabel = cc.LabelTTF.create(<span class="string">"Hello World"</span>, <span class="string">"Arial"</span>, <span class="number">38</span>);</span><br><span class="line">        <span class="comment">// position the label on the center of the screen</span></span><br><span class="line">        <span class="keyword">this</span>.helloLabel.setPosition(size.width / <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// add the label as a child to this layer</span></span><br><span class="line">        <span class="keyword">this</span>.addChild(<span class="keyword">this</span>.helloLabel, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> lazyLayer = cc.Layer.create();</span><br><span class="line">        <span class="keyword">this</span>.addChild(lazyLayer);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add "HelloWorld" splash screen"</span></span><br><span class="line">        <span class="keyword">this</span>.sprite = cc.Sprite.create(<span class="string">"res/HelloWorld.png"</span>);</span><br><span class="line">        <span class="keyword">this</span>.sprite.setPosition(size.width / <span class="number">2</span>, size.height / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">this</span>.sprite.setScale(<span class="number">0.5</span>);</span><br><span class="line">        <span class="keyword">this</span>.sprite.setRotation(<span class="number">180</span>);</span><br><span class="line"></span><br><span class="line">        lazyLayer.addChild(<span class="keyword">this</span>.sprite, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> rotateToA = cc.RotateTo.create(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">var</span> scaleToA = cc.ScaleTo.create(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.sprite.runAction(cc.Sequence.create(rotateToA, scaleToA));</span><br><span class="line">        <span class="keyword">this</span>.helloLabel.runAction(cc.Spawn.create(cc.MoveBy.create(<span class="number">2.5</span>, cc.p(<span class="number">0</span>, size.height - <span class="number">40</span>)),cc.TintTo.create(<span class="number">2.5</span>,<span class="number">255</span>,<span class="number">125</span>,<span class="number">0</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.setTouchEnabled(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// a selector callback</span></span><br><span class="line">    menuCloseCallback:<span class="function"><span class="keyword">function</span> (<span class="params">sender</span>) </span>&#123;</span><br><span class="line">        cc.Director.getInstance().end();</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchesBegan:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isMouseDown = <span class="literal">true</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchesMoved:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.isMouseDown) &#123;</span><br><span class="line">            <span class="keyword">if</span> (touches) &#123;</span><br><span class="line">                <span class="comment">//this.circle.setPosition(touches[0].getLocation().x, touches[0].getLocation().y);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchesEnded:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.isMouseDown = <span class="literal">false</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    onTouchesCancelled:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"onTouchesCancelled"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> HelloWorldScene = cc.Scene.extend(&#123;</span><br><span class="line">    onEnter:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line">        <span class="keyword">var</span> layer = <span class="keyword">new</span> Helloworld();</span><br><span class="line">        layer.init();</span><br><span class="line">        <span class="keyword">this</span>.addChild(layer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>####分析</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">isMouseDown:<span class="literal">false</span>,</span><br><span class="line">helloImg:<span class="literal">null</span>,</span><br><span class="line">helloLabel:<span class="literal">null</span>,</span><br><span class="line">circle:<span class="literal">null</span>,</span><br><span class="line">sprite:<span class="literal">null</span>,</span><br></pre></td></tr></table></figure>
<p>这是对接下来用到的成员变量的定义</p>
<p>再看接下来的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">init:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//首先初始化超类</span></span><br><span class="line">    <span class="keyword">this</span>._super();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取屏宽</span></span><br><span class="line">    <span class="keyword">var</span> size = cc.Director.getInstance().getWinSize();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加一个关闭按钮到菜单项</span></span><br><span class="line">    <span class="keyword">var</span> closeItem = cc.MenuItemImage.create(</span><br><span class="line">        <span class="string">"res/CloseNormal.png"</span>,</span><br><span class="line">        <span class="string">"res/CloseSelected.png"</span>,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            history.go(<span class="number">-1</span>);</span><br><span class="line">        &#125;,<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//设置锚点，默认就是0.5，0.5</span></span><br><span class="line">    closeItem.setAnchorPoint(<span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="comment">//创建关闭按钮</span></span><br><span class="line">    <span class="keyword">var</span> menu = cc.Menu.create(closeItem);</span><br><span class="line">    <span class="comment">//设置菜单项位置</span></span><br><span class="line">    menu.setPosition(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//添加菜单项到当前层上</span></span><br><span class="line">    <span class="keyword">this</span>.addChild(menu, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//设置菜单的位置为屏幕右下角</span></span><br><span class="line">    closeItem.setPosition(size.width - <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建一个叫做helloworld的文本标签</span></span><br><span class="line">    <span class="keyword">this</span>.helloLabel = cc.LabelTTF.create(<span class="string">"Hello World"</span>, <span class="string">"Arial"</span>, <span class="number">38</span>);</span><br><span class="line">    <span class="comment">//把文本标签放到屏幕中央位置</span></span><br><span class="line">    <span class="keyword">this</span>.helloLabel.setPosition(size.width / <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//添加该文本标签放到当前层上</span></span><br><span class="line">    <span class="keyword">this</span>.addChild(<span class="keyword">this</span>.helloLabel, <span class="number">5</span>);</span><br><span class="line">    <span class="comment">//创建一个新层lazylay并放入当前层</span></span><br><span class="line">    <span class="keyword">var</span> lazyLayer = cc.Layer.create();</span><br><span class="line">    <span class="keyword">this</span>.addChild(lazyLayer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加一个能旋转的helloworld精灵</span></span><br><span class="line">    <span class="keyword">this</span>.sprite = cc.Sprite.create(<span class="string">"res/HelloWorld.png"</span>);</span><br><span class="line">    <span class="keyword">this</span>.sprite.setPosition(size.width / <span class="number">2</span>, size.height / <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//先缩小50%且倒过来</span></span><br><span class="line">    <span class="keyword">this</span>.sprite.setScale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="keyword">this</span>.sprite.setRotation(<span class="number">180</span>);</span><br><span class="line">    <span class="comment">//添加到lazyLayer层</span></span><br><span class="line">    lazyLayer.addChild(<span class="keyword">this</span>.sprite, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//定义2个动作分别为旋转2秒到0度和缩放2秒无x轴y轴缩放</span></span><br><span class="line">    <span class="keyword">var</span> rotateToA = cc.RotateTo.create(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> scaleToA = cc.ScaleTo.create(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//让helloworld精灵依次运行这2个动作</span></span><br><span class="line">    <span class="keyword">this</span>.sprite.runAction(cc.Sequence.create(rotateToA, scaleToA));</span><br><span class="line">    <span class="comment">//使文本标签同时运行ccMoveBy动作（后面讲）和CCTintTo动作（使文字）</span></span><br><span class="line">    <span class="keyword">this</span>.helloLabel.runAction(cc.Spawn.create(cc.MoveBy.create(<span class="number">2.5</span>, cc.p(<span class="number">0</span>, size.height - <span class="number">40</span>)),cc.TintTo.create(<span class="number">2.5</span>,<span class="number">255</span>,<span class="number">125</span>,<span class="number">0</span>)));</span><br><span class="line">    <span class="comment">//设置为支持触碰</span></span><br><span class="line">    <span class="keyword">this</span>.setTouchEnabled(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>需要注意的是<br>1) cc.Sequence代表依次运行动作，而cc.Spawn代表同时运行动作<br>2) CCMoveTo是“移动到这里”；而CCMoveBy则是“相对于之前点再移动”，比如说说这里需要两个坐标pos1（x1，y1），pos2（x2，y2），用CCMoveTo的话，就是将对象由pos1移动到pos2，而CCMOveBy则是对象的终坐标是在pos1的基础上再加上（矢量相加）pos2，终坐标pos3=pos1+pos2。</p>
<p>接下来是一些触碰事件的回调函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击关闭按钮的回调函数，退出实例</span></span><br><span class="line">menuCloseCallback:<span class="function"><span class="keyword">function</span> (<span class="params">sender</span>) </span>&#123;</span><br><span class="line">    cc.Director.getInstance().end();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//按下按钮的状态</span></span><br><span class="line">onTouchesBegan:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.isMouseDown = <span class="literal">true</span>;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//按下按钮移动时</span></span><br><span class="line">onTouchesMoved:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isMouseDown) &#123;</span><br><span class="line">        <span class="keyword">if</span> (touches) &#123;</span><br><span class="line">            <span class="comment">//this.circle.setPosition(touches[0].getLocation().x, touches[0].getLocation().y);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//放开按钮的状态</span></span><br><span class="line">onTouchesEnded:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.isMouseDown = <span class="literal">false</span>;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//离开按钮的状态</span></span><br><span class="line">onTouchesCancelled:<span class="function"><span class="keyword">function</span> (<span class="params">touches, event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"onTouchesCancelled"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> HelloWorldScene = cc.Scene.extend(&#123;</span><br><span class="line">    onEnter:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>._super();</span><br><span class="line">        <span class="keyword">var</span> layer = <span class="keyword">new</span> Helloworld();</span><br><span class="line">        layer.init();</span><br><span class="line">        <span class="keyword">this</span>.addChild(layer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>进入了之后就把这个layer再加载到场景上，初步分析终了，等完成一个项目之后再来接着写点东西。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.evoupsight.com/2014/01/23/cocos2d-html52-dot-2-2-first-exploration/" data-id="cjtcp5ssu00cfcrsxa21f1obm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/02/08/cocos2d-x-cocos2d-iphone-cocos2d-html5-load-sprite-summary/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          cocos2d-x cocos2d-iphone cocos2d-html5下加载精灵的总结
        
      </div>
    </a>
  
  
    <a href="/2014/01/20/win7-install-apk-on-android-emulator/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Win7上Android模拟器上安装apk软件</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/android/cocos2d-js/">cocos2d-js</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-language/">c-language</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/c-language/monitor/">monitor</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-html5/">cocos2d-html5</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-js/">cocos2d-js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-js/android/">android</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x/">cocos2d-x</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x/cocos2d-iphone/">cocos2d-iphone</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/cocos2d-x/cocos2d-iphone/cocos2d-html5/">cocos2d-html5</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cplusplus/">cplusplus</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/">erlang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/rrdtool/">rrdtool</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/rrdtool/monitor/">monitor</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/vim/">vim</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/">freebsd</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/nginx/php/">php</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/rrdtool/">rrdtool</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/rrdtool/linux/">linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/vim/">vim</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/freebsd/vim/ctags/">ctags</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/gamedev-cg/">gamedev-cg</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gcc/">gcc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/">hbase</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/hive/">hive</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hbase/hive/zookeeper/">zookeeper</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hive/">hive</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/hive/java/">java</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/haproxy/">haproxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hbase/">hbase</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hbase/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hbase/hadoop/zookeeper/">zookeeper</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/hive/">hive</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/hive/maven/">maven</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/maven/">maven</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/mybatis/">mybatis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/latex/">latex</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/vmware/">vmware</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/vmware/centos/">centos</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/monitor/">monitor</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/monitor/rrdtool/">rrdtool</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/mongodb/">mongodb</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/octopress/">octopress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/php/hadoop/">hadoop</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/php/hadoop/zookeeper/">zookeeper</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/monitor/">monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/nosql/">nosql</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/rrdtool/">rrdtool</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/rrdtool/nginx/">nginx</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/shell/devops/">devops</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/monitor/">monitor</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/socket-server/">socket server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/version-control/">version_control</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/version-control/freebsd/">freebsd</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/vim/">vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">January 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">June 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/01/">January 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">December 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10/">October 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">September 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">June 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07/">July 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05/">May 2008</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/15/idea-mybatis-codes-generator/">mybatis生成器生成代码</a>
          </li>
        
          <li>
            <a href="/2016/07/11/latex-vim-pratice/">linux下latex中文配置小记</a>
          </li>
        
          <li>
            <a href="/2015/04/21/javascript-class-define-5-method/">五类方法定义javascript类</a>
          </li>
        
          <li>
            <a href="/2015/04/21/sync-fork-github/">同步github分支过来的代码库</a>
          </li>
        
          <li>
            <a href="/2014/09/16/sqoop-dump-to-mysql/">sqoop导出hive数据到mysql</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 evoup yin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>