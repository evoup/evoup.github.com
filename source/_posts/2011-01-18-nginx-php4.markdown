---
layout: post
title: "freebsd下安装nginx+php4.4.9的方法"
date: 2011-01-18 15:10
comments: true
categories: [freebsd,nginx,php] 
---

首先是php4.4
http://cn.php.net/distributions/php-4.4.9.tar.bz2

<!-- more -->

（ps:更老的版本可以到museum.php.net去找。）

装之前别忘为--enable的几个找下pecl
编译php4（先不打补丁）的时候先使用这样的参数
```makefile
./configure --prefix=/usr/local/php4_admin --enable-versioning --enable-memory-limit --with-layout=GNU --with-config-file-scan-dir=/usr/local/php4_admin/etc/php --with-mysql=/usr/local -enable-mbstring --enable-ctype --with-gd=/usr/local --with-freetype-dir=/usr/local --enable-ftp --with-mcrypt=/usr/local --enable-memcache --enable-apc --enable-xml --with-pcre-regex --enable-bcompiler --with-bz2 --with-zlib --enable-fastcgi --enable-fpm

make
make install
```

然后打补丁
同时候准备好补丁文件，http://php-fpm.org/downloads/php-4.4.9-fpm-0.5.10.diff.gz
```sh
gzip -cd php-4.4.9-fpm-0.5.10.diff.gz  | patch -d php-4.4.9 -p1
```
再次
```makefile
./configure --prefix=/usr/local/php4_admin --enable-versioning --enable-memory-limit --with-layout=GNU --with-config-file-scan-dir=/usr/local/php4_admin/etc/php --enable-force-cgi-redirect --with-mysql=/usr/local -enable-mbstring --enable-ctype --with-gd=/usr/local --with-freetype-dir=/usr/local --enable-ftp --with-mcrypt=/usr/local --enable-memcache --enable-apc --enable-xml --with-pcre-regex --enable-bcompiler --with-bz2 --with-zlib --enable-fastcgi --enable-fpm

make
make install
```



这个php-fpm.conf要改的
```sh
 62             Unix user of processes
 63         <!--    <value name="user">nobody</value>       -->
 64
 65             Unix group of processes
 66         <!--    <value name="group">nobody</value>      -->
```


换成
```sh
 62             Unix user of processes
 63             <value name="user">www</value>
 64
 65             Unix group of processes
 66             <value name="group">www</value>
```

然后到目录sbin下试一试
```sh
sudo /usr/local/php4_admin/sbin/php-fpm start
```
看到就可以了，收工。
