<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: java | Evoup`s Blog]]></title>
  <link href="http://evoupsight.com/blog/categories/java/atom.xml" rel="self"/>
  <link href="http://evoupsight.com/"/>
  <updated>2016-12-30T13:20:29+08:00</updated>
  <id>http://evoupsight.com/</id>
  <author>
    <name><![CDATA[Evoup`s Blog]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[mybatis生成器生成代码]]></title>
    <link href="http://evoupsight.com/blog/2016/08/15/idea-mybatis-codes-generator/"/>
    <updated>2016-08-15T13:45:00+08:00</updated>
    <id>http://evoupsight.com/blog/2016/08/15/idea-mybatis-codes-generator</id>
    <content type="html"><![CDATA[<p>这里记录官方的控制台生成方法。 </p>

<!-- more -->

<p>插件的下载</p>

<p><code>bash
cd ~/software
mkdir mybatisGenerator
cd !$
git clone git@github.com:mybatis/generator.git
cd generator/core/mybatis-generator-core
mvn clean package
</code></p>

<p>编译后在target目录生成了mybatis-generator-core-1.3.4-SNAPSHOT.jar </p>

<p>接着还需要准备好mysql的java驱动包</p>

<p><code>bash
cd ~/software
wget http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz 
</code></p>

<p>然后创建generatorConfig.xml（注：不一定非得像其他教程说的那样非得放到项目的resources目录下）,内容如下：</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="ni">&amp;lt;</span>!DOCTYPE generatorConfiguration
</span><span class='line'>  PUBLIC “-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN”
</span><span class='line'>  “http://mybatis.org/dtd/mybatis-generator-config<span class="nt">&lt;em&gt;</span>1<span class="nt">&lt;/em&gt;</span>0.dtd”<span class="ni">&amp;gt;</span><span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;generatorconfiguration&gt;</span>
</span><span class='line'>  <span class="nt">&lt;classpathentry</span> <span class="na">location=</span><span class="s">&quot;/Program Files/IBM/SQLLIB/java/db2java.zip&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;context</span> <span class="na">id=</span><span class="s">&quot;DB2Tables&quot;</span> <span class="na">targetruntime=</span><span class="s">&quot;MyBatis3&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;jdbcconnection</span> <span class="na">driverclass=</span><span class="s">&quot;COM.ibm.db2.jdbc.app.DB2Driver&quot;</span> <span class="na">connectionurl=</span><span class="s">&quot;jdbc:db2:TEST&quot;</span> <span class="na">userid=</span><span class="s">&quot;db2admin&quot;</span> <span class="na">password=</span><span class="s">&quot;db2admin&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/jdbcconnection&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;javatyperesolver&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;forceBigDecimals&quot;</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/javatyperesolver&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;javamodelgenerator</span> <span class="na">targetpackage=</span><span class="s">&quot;test.model&quot;</span> <span class="na">targetproject=</span><span class="s">&quot;\MBGTestProject\src&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;trimStrings&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/javamodelgenerator&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;sqlmapgenerator</span> <span class="na">targetpackage=</span><span class="s">&quot;test.xml&quot;</span> <span class="na">targetproject=</span><span class="s">&quot;\MBGTestProject\src&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/sqlmapgenerator&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;javaclientgenerator</span> <span class="na">type=</span><span class="s">&quot;XMLMAPPER&quot;</span> <span class="na">targetpackage=</span><span class="s">&quot;test.dao&quot;</span> <span class="na">targetproject=</span><span class="s">&quot;\MBGTestProject\src&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;enableSubPackages&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/javaclientgenerator&gt;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&lt;table</span> <span class="na">schema=</span><span class="s">&quot;DB2ADMIN&quot;</span> <span class="na">tablename=</span><span class="s">&quot;ALLTYPES&quot;</span> <span class="na">domainobjectname=</span><span class="s">&quot;Customer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;useActualColumnNames&quot;</span> <span class="na">value=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;generatedkey</span> <span class="na">column=</span><span class="s">&quot;ID&quot;</span> <span class="na">sqlstatement=</span><span class="s">&quot;DB2&quot;</span> <span class="na">identity=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;columnoverride</span> <span class="na">column=</span><span class="s">&quot;DATE_FIELD&quot;</span> <span class="na">property=</span><span class="s">&quot;startDate&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;ignorecolumn</span> <span class="na">column=</span><span class="s">&quot;FRED&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;columnoverride</span> <span class="na">column=</span><span class="s">&quot;LONG_VARCHAR_FIELD&quot;</span> <span class="na">jdbctype=</span><span class="s">&quot;VARCHAR&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/table&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;/context&gt;</span>
</span><span class='line'><span class="nt">&lt;/generatorconfiguration&gt;</span>
</span><span class='line'><span class="nt">&lt;p&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>columnOverride中的jdbcType是指数据库对应jdbc的字段类型，如果有特殊需求如mysql中的字段为text类型，而text字段默认用mybatis会再生成一个以该字段为成员变量的withBLOBs类，若想生成的java代码不要生成出withBLOBs的话，可以手动指定jdbcType=”VARCHAR”来规避。</p>

<p>接下来就是修改配置文件了
第一步先修改classPathEntry的值，把原来的/Program Files/IBM/SQLLIB/java/db2java.zip换成，现在mysql驱动:</p>

<p><code>xml
&lt;classPathEntry location="/home/evoup/software/mysql-connector-java-5.1.39.tar.gz" /&gt;
</code>
然后注意到context id=”DB2Tables”,这个如果是单个表的话不改也没什么问题，但是根据文档 </p>

<blockquote>
  <p>A unique identifier for this context. This value will be used in some error messages.</p>
</blockquote>

<p>只是一个上下文的标识，所以可以忽略按照默认就可以了，但是我还是把它改成了context id=”context1” 
targetRuntime=”Mybatis3”这也是一个默认的可选选项，所以可以直接去掉，所以这一段看起来是这样：</p>

<p><code>xml
  &lt;classPathEntry location="/home/evoup/software/mysql-connector-java-5.1.39.tar.gz" /&gt;
  &lt;context id="context1" &gt;
</code></p>

<p>之后要替换掉jdbc驱动类</p>

<p><code>xml
&lt;jdbcConnection driverClass="COM.ibm.db2.jdbc.app.DB2Driver"
    connectionURL="jdbc:db2:TEST" 
    userId="db2admin"
    password="db2admin"&gt; 
&lt;/jdbcConnection&gt;
</code>
改成</p>

<p><code>xml
&lt;jdbcConnection driverClass="com.mysql.jdbc.Driver" connectionURL="jdbc:mysql://localhost:3306/myDb" userId="root" password="" /&gt;
</code></p>

<p>再接下来的</p>

<p>```xml</p>
<javatyperesolver>                                                                                                                 
  <property name="forceBigDecimals" value="false" />                                                                                
</javatyperesolver>
<p>```
官方是说</p>

<blockquote>
  <p>This element specifies that we always want to use the java.math.BigDecimal type for DECIMAL and NUMERIC columns: </p>
</blockquote>

<p>是和数据库列映射到java的pojo的属性对应，可以指定成想要的类型，这里的DECIMAL和NUMERIC列想必是DB2数据库的字段类型了，这样就会强制映射成java.math.BigDecimal，我们用mysql，这个选项不得而知，应该也是同样会转换的。但我直接把这段给去了。</p>

<p>再下来的三段</p>

<p><code>xml
    &lt;javaModelGenerator targetPackage="test.model" targetProject="\MBGTestProject\src"&gt; 
      &lt;property name="enableSubPackages" value="true" /&gt;
      &lt;property name="trimStrings" value="true" /&gt;
    &lt;/javaModelGenerator&gt;
    &lt;sqlMapGenerator targetPackage="test.xml"  targetProject="\MBGTestProject\src"&gt;
      &lt;property name="enableSubPackages" value="true" /&gt;
    &lt;/sqlMapGenerator&gt;
    &lt;javaClientGenerator type="XMLMAPPER" targetPackage="test.dao"  targetProject="\MBGTestProject\src"&gt; 
      &lt;property name="enableSubPackages" value="true" /&gt;
    &lt;/javaClientGenerator&gt;
</code></p>

<p>其中</p>

<blockquote>
  <p>The <javamodelgenerator> element is used to define properties of the Java model generator. The Java Model Generator builds primary key classes, record classes, and Query by Example classes that match the introspected table. This element is a required child element of the <context> element.</context></javamodelgenerator></p>
</blockquote>

<p>Model模型生成器,用来生成含有主键key的类，记录类 以及查询Example类。targetPackage是指定生成的model生成所在的包名，targetProject是指定在该项目下所在的路径。</p>

<blockquote>
  <p>The <sqlmapgenerator> element is used to define properties of the SQL map generator. The SQL Map Generator builds a MyBatis/iBATIS formatted SQL map XML file for each introspected table.</sqlmapgenerator></p>
</blockquote>

<p>sqlMapGenerator指Mapper映射文件生成所在的目录，为每一个数据库的表生成对应的SqlMap文件。</p>

<blockquote>
  <p>The <javaclientgenerator> element is used to define properties of the Java client generator. The Java client Generator builds Java interfaces and classes that allow easy use of the generated Java model and XML map files </javaclientgenerator></p>
</blockquote>

<p>javaClientGenerator客户端代码，生成易于使用的针对Model对象和XML配置文件 的代码。</p>

<p>根据需要我把以上3个配置项改成了如下</p>

<p><code>xml
&lt;javaModelGenerator targetPackage="com.company.project.dao.model" targetProject="16-adsapi-facebook" /&gt;
&lt;sqlMapGenerator targetPackage="com.company.project.dao.mapper" targetProject="16-adsapi-facebook" /&gt;
&lt;javaClientGenerator targetPackage="com.company.project.dao.client" targetProject="16-adsapi-facebook" type="XMLMAPPER" /&gt;
</code></p>

<p>最后一个配置</p>

<p><code>xml
&lt;table schema="DB2ADMIN" tableName="ALLTYPES" domainObjectName="Customer" &gt;
  &lt;property name="useActualColumnNames" value="true"/&gt;
  &lt;generatedKey column="ID" sqlStatement="DB2" identity="true" /&gt;
  &lt;columnOverride column="DATE_FIELD" property="startDate" /&gt;
  &lt;ignoreColumn column="FRED" /&gt;
  &lt;columnOverride column="LONG_VARCHAR_FIELD" jdbcType="VARCHAR" /&gt;
&lt;/table&gt; 
</code></p>

<p>参数比较多，我直接改成了,很清楚就是表映射为domain对象，对于mysql，schema这个参数可以省略的。</p>

<p><code>xml
&lt;table tableName="myTable" domainObjectName="DomainObjectName"/&gt; 
</code></p>

<p>于是最终的测试生成文件是这样的</p>

<p>```xml
<?xml version="1.0" encoding="UTF-8" ?>
&lt;!DOCTYPE generatorConfiguration PUBLIC “-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN” “http://mybatis.org/dtd/mybatis-generator-config<em>1</em>0.dtd” &gt;</p>
<generatorconfiguration>

    <classpathentry location="/home/evoup/project/mybatisGen/mysql-connector-java-5.1.39/mysql-connector-java-5.1.39-bin.jar" />
    <context id="context1">

        <jdbcconnection driverclass="com.mysql.jdbc.Driver" connectionurl="jdbc:mysql://172.16.26.177:3306/adsapi" userid="dba" password="madsolution" />
        <javamodelgenerator targetpackage="com.madhouse.performad.adsapi.facebook.dao.model" targetproject="16-adsapi-facebook" />
        <sqlmapgenerator targetpackage="com.madhouse.performad.adsapi.facebook.dao.mapper" targetproject="16-adsapi-facebook" />
        <javaclientgenerator targetpackage="com.madhouse.performad.adsapi.facebook.dao.client" targetproject="/home/evoup/project/16-adsapi-facebook" type="XMLMAPPER" />
        <table schema="" tablename="facebook_ad" domainobjectname="FacebookAdModel" />
 
    </context>
</generatorconfiguration>
<p>```</p>

<p>生成
做了一个脚本</p>

<p><code>bash
#!/bin/sh
MYBATIS_HOME=/home/evoup/project/mybatisGen/generator/core/mybatis-generator-core/target
#XML_HOME=/home/evoup/project/adsapi_3.0.19/adsapi-facebook/src/main/resources
XML_HOME=/home/evoup/project/adsapi_trunk/adsapi-facebook/src/main/resources
java -jar ${MYBATIS_HOME}/mybatis-generator-core-1.3.5-SNAPSHOT.jar -configfile ${XML_HOME}/generatorConfigFB.xml -overwrite
</code>
运行脚本就可以生成了，最后将生成以下文件，见下图：
<img src="/images/evoup/mbGenerateFiles.jpg" alt="Alt text" /></p>

<p>最后补一个，xml文件还要放到spring项目的src/main/resource对应目录下，如果单单放在src/main/java对应目录下还是不行的</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[编译cdh47下hive的contrib源码]]></title>
    <link href="http://evoupsight.com/blog/2014/07/31/compile-cdh47-hive-contrib/"/>
    <updated>2014-07-31T10:18:00+08:00</updated>
    <id>http://evoupsight.com/blog/2014/07/31/compile-cdh47-hive-contrib</id>
    <content type="html"><![CDATA[<p>进入hive的src/contrib目录，开始编译，提示需要这几个包得加到classpath中
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/home/hadoop/software/hadoop-2.0.0-cdh4.7.0/share/hadoop/common/hadoop-common-2.0.0-cdh4.7.0.jar
</span><span class='line'>/home/hadoop/software/hadoop-2.0.0-cdh4.7.0/share/hadoop/mapreduce1/hadoop-core-2.0.0-mr1-cdh4.7.0.jar</span></code></pre></td></tr></table></div></figure></notextile></div>
<!-- more --></p>

<p>看下工程路径build.xml的29行
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;import file="../build-common.xml" /></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>于是编辑上级目录的build-common.xml文件
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>266   &lt;path id="classpath">
</span><span class='line'>267     &lt;pathelement location="${build.dir.hive}/service/classes" />
</span><span class='line'>268     &lt;pathelement location="${build.dir.hive}/common/classes" />
</span><span class='line'>269     &lt;pathelement location="${build.dir.hive}/serde/classes" />
</span><span class='line'>270     &lt;pathelement location="${build.dir.hive}/metastore/classes" />
</span><span class='line'>271     &lt;pathelement location="${build.dir.hive}/ql/classes" />
</span><span class='line'>272     &lt;pathelement location="${build.dir.hive}/beeline/classes" />
</span><span class='line'>273     &lt;pathelement location="${build.dir.hive}/cli/classes" />
</span><span class='line'>274     &lt;pathelement location="${build.dir.hive}/shims/classes" />
</span><span class='line'>275     &lt;pathelement location="${build.dir.hive}/hwi/classes" />
</span><span class='line'>276     &lt;pathelement location="${build.dir.hive}/jdbc/classes" />
</span><span class='line'>277     &lt;pathelement location="${build.dir.hive}/hbase-handler/classes" />
</span><span class='line'>278 &lt;!--{ { {把缺少的hadoop加入-->
</span><span class='line'>279     &lt;pathelement location="/home/hadoop/software/hadoop-2.0.0-cdh4.7.0/share/hadoop/common/hadoop-common-2.0.0-cdh4.7.0.jar" />
</span><span class='line'>280     &lt;pathelement location="/home/hadoop/software/hadoop-2.0.0-cdh4.7.0/share/hadoop/mapreduce1/hadoop-core-2.0.0-mr1-cdh4.7.0.jar" />
</span><span class='line'>281 &lt;!--} } }-->
</span><span class='line'>282     &lt;fileset dir="${basedir}" includes="lib/*.jar" />
</span><span class='line'>283     &lt;path refid="common-classpath" />
</span><span class='line'>284   &lt;/path></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>像上面这样把2个包加入。</p>

<p>然后回到工程文件，执行ant，提示将编译contrib包，一路过去，没有问题
，最后编译的jar包存到了ivy的路径下
<div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>compile:
</span><span class='line'>     [echo] Project: contrib
</span><span class='line'>    [javac] Compiling 39 source files to /home/hadoop/software/hive-0.10.0-cdh4.7.0/src/build/contrib/classes
</span><span class='line'>    [javac] /home/hadoop/software/hadoop-2.0.0-cdh4.7.0/share/hadoop/common/hadoop-common-2.0.0-cdh4.7.0.jar(org/apache/hadoop/fs/Path.class): 警告: 无法找到类型 ‘LimitedPrivate’ 的注释方法 ‘value()’: 找不到org.apache.hadoop.classification.InterfaceAudience的类文件
</span><span class='line'>    [javac] 注: 某些输入文件使用或覆盖了已过时的 API。
</span><span class='line'>    [javac] 注: 有关详细信息, 请使用 -Xlint:deprecation 重新编译。
</span><span class='line'>    [javac] 注: /home/hadoop/software/hive-0.10.0-cdh4.7.0/src/contrib/src/java/org/apache/hadoop/hive/contrib/udf/example/UDFExampleStructPrint.java使用了未经检查或不安全的操作。
</span><span class='line'>    [javac] 注: 有关详细信息, 请使用 -Xlint:unchecked 重新编译。
</span><span class='line'>    [javac] 1 个警告
</span><span class='line'>     [copy] Warning: /home/hadoop/software/hive-0.10.0-cdh4.7.0/src/contrib/src/java/conf does not exist.&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>jar:
</span><span class='line'>     [echo] Project: contrib
</span><span class='line'>      [jar] Building jar: /home/hadoop/software/hive-0.10.0-cdh4.7.0/src/build/contrib/hive-contrib-0.10.0-cdh4.7.0.jar
</span><span class='line'>[ivy:publish] :: delivering :: org.apache.hive#hive-contrib;0.10.0-cdh4.7.0 :: 0.10.0-cdh4.7.0 :: integration :: Fri Jul 25 10:54:42 CST 2014
</span><span class='line'>[ivy:publish]   delivering ivy file to /home/hadoop/software/hive-0.10.0-cdh4.7.0/src/build/contrib/ivy-0.10.0-cdh4.7.0.xml
</span><span class='line'>[ivy:publish] :: publishing :: org.apache.hive#hive-contrib
</span><span class='line'>[ivy:publish]   published hive-contrib to /home/hadoop/.ivy2/local/org.apache.hive/hive-contrib/0.10.0-cdh4.7.0/jars/hive-contrib.jar
</span><span class='line'>[ivy:publish]   published ivy to /home/hadoop/.ivy2/local/org.apache.hive/hive-contrib/0.10.0-cdh4.7.0/ivys/ivy.xml&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>BUILD SUCCESSFUL
</span><span class='line'>Total time: 19 seconds</span></code></pre></td></tr></table></div></figure></notextile></div>
ok
这样就得到了hive-contrib.jar文件,解包看一下内容。没问题，都包含了。</p>

<p>参考互联网文章《如何在Ant中引入第三方Jar包》，然而链接已挂删除了：）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[apache common configure依赖注意]]></title>
    <link href="http://evoupsight.com/blog/2014/06/13/apache-common-configure/"/>
    <updated>2014-06-13T15:35:00+08:00</updated>
    <id>http://evoupsight.com/blog/2014/06/13/apache-common-configure</id>
    <content type="html"><![CDATA[<p>基于maven使用apache的common-configuration的过程中，遇到一个依赖小问题，记录下</p>

<!-- more -->

<p>关于这个包commons-configuration-1.6.jar,注意一定要有三个包才能使用，见下pom片段</p>

<p>```</p>
<dependencies>

    <dependency>

        <groupid>commons-configuration</groupid>

        <artifactid>commons-configuration</artifactid>

        <version>1.8</version>

    </dependency>

    <dependency>

        <groupid>commons-beanutils</groupid>

        <artifactid>commons-beanutils</artifactid>

        <version>1.8.0</version>

    </dependency>

    <dependency>

        <groupid>commons-jxpath</groupid>

        <artifactid>commons-jxpath</artifactid>

        <version>1.3</version>

    </dependency>

</dependencies>
<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[maven使用小记]]></title>
    <link href="http://evoupsight.com/blog/2014/06/12/maven-relative-note/"/>
    <updated>2014-06-12T14:41:00+08:00</updated>
    <id>http://evoupsight.com/blog/2014/06/12/maven-relative-note</id>
    <content type="html"><![CDATA[<h3 id="section">介绍</h3>
<p>maven是java的一个比较有名的项目构建工具，类似的工具还有ant、gradle等，采用vim+maven构建java项目需要了解maven的基本操作，以下是项目收集到的一些使用套路和细节注意点。</p>

<!-- more -->

<h3 id="section-1">安装(其实无需安装)</h3>

<p>由于可能地址被墙，在国内maven下载依赖比较慢，最好在编辑/etc/hosts，并在其中加上依赖服务器的IP地址，如下：</p>

<p><code>bash
199.27.77.129 repo.maven.apache.org
</code></p>

<p>下载和解压安装包</p>

<p><code>bash
mkdir /home/software/
fetch http://down1.chinaunix.net/distfiles/apache-maven-3.0.4-bin.tar.gz
tar xzf apache-maven-3.0.4-bin.tar.gz
</code></p>

<p>然后在~/.cshrc中指定(我这里是使用tcsh作为shell环境)</p>

<p><code>tcsh
setenv M2_HOME "/usr/home/software/apache-maven-3.0.4"
setenv MAVEN_OPTS "-Xms128m -Xmx512m"
set path=( $path $M2_HOME/bin )
</code></p>

<p>接着</p>

<p><code>tcsh
source ~/.cshrc
</code></p>

<p>就可以使用mvn命令了</p>

<h3 id="section-2">基本测试构建</h3>

<p>生成测试</p>

<p><code>bash
mvn clean test
</code></p>

<p>以上命令能直接生成class文件，并且支持自动测试（需要引入Junt并编写测试代码）</p>

<p>生成测试和打包</p>

<p><code>bash
mvn clean package
</code></p>

<p>以上命令能直接生成最终的jar包文件，同时实现mvn clean test的所有功能</p>

<h3 id="section-3">常用命令</h3>
<p>编译</p>

<p><code>bash
mvn compile
</code></p>

<p>清理（删除所有test，package，compile等生成的文件）</p>

<p><code>bash
mvn clean
</code></p>

<p>获取所有依赖并且打包</p>

<p><code>bash
mvn dependency:copy-dependencies -DoutputDirectory=lib package
</code></p>

<p>不经过测试直接打包</p>

<p><code>bash
mvn -DskipTests clean package
</code></p>

<h3 id="section-4">找依赖的方法</h3>
<p>以下两个网站任意一个直接在搜索框中给出java根类即可，第一个网站还可以在线查看jar包里的方法，可以当在线手册查阅：</p>

<p>https://repository.sonatype.org/</p>

<p>http://mvnrepository.com/</p>

<h3 id="section-5">创建骨架</h3>

<p><code>bash
mvn archetype:create -DgroupId=com.mycompany.app -DartifactId=myapp
</code></p>

<p>参考：
《Maven实战》</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[maven打包时候加入依赖]]></title>
    <link href="http://evoupsight.com/blog/2014/03/15/maven-add-dependency/"/>
    <updated>2014-03-15T14:52:00+08:00</updated>
    <id>http://evoupsight.com/blog/2014/03/15/maven-add-dependency</id>
    <content type="html"><![CDATA[<p>maven打包默认不加入依赖的jar包，需要改动pom.xml，加入以下内容：
<!-- more --></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>pom.xml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;build&gt;</span>
</span><span class='line'>        <span class="nt">&lt;plugins&gt;</span>
</span><span class='line'>            <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>                <span class="nt">&lt;groupid&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;artifactid&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;excludes&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;exclude&gt;</span>/conf/**<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;exclude&gt;</span>/fonts/**<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;exclude&gt;</span>/images/**<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;exclude&gt;</span>/sounds/**<span class="nt">&lt;/exclude&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;/excludes&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>            <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>                <span class="nt">&lt;groupid&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;artifactid&gt;</span>maven-shade-plugin<span class="nt">&lt;/artifactid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>                <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;goal&gt;</span>shade<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;transformers&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;transformer</span> <span class="na">implementation=</span><span class="s">&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>                                    <span class="nt">&lt;mainclass&gt;</span>com.company.mod.cls<span class="nt">&lt;/mainclass&gt;</span>
</span><span class='line'>                                <span class="nt">&lt;/transformer&gt;</span>
</span><span class='line'>                            <span class="nt">&lt;/transformers&gt;</span>
</span><span class='line'>                        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>            <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>                <span class="nt">&lt;groupid&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;artifactid&gt;</span>maven-surefire-plugin<span class="nt">&lt;/artifactid&gt;</span>
</span><span class='line'>                <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>                    <span class="nt">&lt;testfailureignore&gt;</span>true<span class="nt">&lt;/testfailureignore&gt;</span>
</span><span class='line'>                <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>       <span class="nt">&lt;/plugins&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/build&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

]]></content>
  </entry>
  
</feed>
